#### 一、部署建议

> 建议将所有文件放到`/home/demo`目录下，否则需要修改相关文件中的配置。

#### 二、文件清单

- app.sh
- build.sh
- demo.sql
- Dockerfile
- jdk-8u181-linux-x64.tar.gz
- mysql.sh
- run.sh
- simsun.ttf
- start.sh
- stop.sh
- classes
- lib
- resources
- demo-1.0.0.jar

#### 三、数据库部署

   ```shell
   ./mysql.sh
   ```

#### 四、应用部署

1. 构建镜像

   ```shell
   ./build.sh
   ```

2. 启动应用容器

   ```shell
   ./run.sh
   ```

#### 五、参考命令

1. mysql配置

   ```shell
   docker exec -it mysql bash
   mysql -u root -p
   set names utf8;
   create database db_demo default character set utf8 collate utf8_general_ci;
   use mysql;
   select host, user from user;
   create user demo identified by 'demo';
   grant all on db_demo.* to 'demo'@'%';
   flush privileges;
   use db_demo;
   show variables like "character%";
   source /home/demo.sql;
   ```
2. 构建镜像

   ```shell
   docker build -t demo:1.0.0 ./
   ```

3. 保存镜像

   ```shell
   docker save -o demo.tar demo:1.0.0
   ```

4. 导入镜像

   ```shell
   docker load -i demo.tar
   ```

5. 拉取镜像

   ```shell
   docker pull 192.168.1.27:5000/demo:1.0.0
   ```

6. 远程仓库

   ```shell
   docker commit -m "update" -a="Oven" container_id 192.168.1.27:5000/demo:1.0.1
   docker tag demo:1.0.1 192.168.1.27:5000/demo:1.0.2
   docker push 192.168.1.27:5000/demo:1.0.2
   ```